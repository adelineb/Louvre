{% extends "LouvreBilletterieBundle::layout.html.twig" %}

{% block title %}
    Billetterie - {{ parent() }}
{% endblock %}

{% block main %}


    <div class="well">
        {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}

        {# Les erreurs générales du formulaire. #}
        {{ form_errors(form) }}

        <fieldset>
            <legend>Vérifier votre commande & Paiement</legend>

            <div class="row">
                {#<div class="col-xs-12 col-md-6">#}
                    <table class="table table-bordered" id="recapCommande">
                        <thead class="thead-inverse">
                            <tr>
                                <th>Nom prénom</th>
                                <th>Tarif</th>
                                <th>Prix</th>
                            </tr>
                        </thead>
                        {% set infos = app.session.get('Infos') %}
                        {% for billet in infos.getClients() %}
                        <tbody>
                            <tr>
                                <th> {{ billet.nom }} {{ billet.prenom }}</th>
                                <th> {{ billet.tarif }} </th>
                                <th> {{ billet.prix }} € </th>
                            </tr>
                        {% endfor %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th colspan="2" class="text-right"> Total </th>
                                <th> {{ app.session.get('Total')  }} € </th>
                            </tr>
                        </tfoot>
                    </table>
                {#</div>#}
            </div>

            <div class="form-group">
                <label class="required">Paiement</label>
                {{ form_widget(form.paiement) }}
            </div>
            <div class="form-group">
                <label class="required">Email</label>
                {{ form_widget(form.email, {'attr': {'required': 'required'}}) }}
            </div>
            {{ form_widget(form._token) }}
        </fieldset>

        <div>
            {{ form_widget(form.Etapesuivante, {'attr': {'class': 'btn btn-default'}}) }}
            {{ form_widget(form.Etapeprec, {'attr': {'class': 'btn btn-default'}}) }}
            {{ form_widget(form.Annuler, {'attr': {'value': 'reset', 'class': 'btn btn-danger'}}) }}
        </div>

    </div>

{% endblock %}
{% block aside %}
    <h4>Votre panier</h4>
    Visite pour le {{ app.session.get('date_visite')|date("d/m/Y") }}
    <hr />
    <!--à partir de-->
    Nombre de ticket(s) : {{ app.session.get('nb_billet') }}

    <div>
        {% set infos = app.session.get('Infos') %}
        {% for billet in infos.getClients() %}
            <p>{{ billet.nom }}
            {{ billet.prenom }}
             / Tarif {{ billet.tarif }}</p>
        {% endfor %}
    </div>

    <hr />
    <div id="total" class="text-center">Total : {{ app.session.get('Total')  }} €</div>
{% endblock %}