{% extends "LouvreBilletterieBundle::layout.html.twig" %}

{% block title %}
    Billetterie - {{ parent() }}
{% endblock %}

{% block filariane %}
    <li>{{ 'Date de la visite' }}</li>
    <li>Informations</li>
{% endblock %}

{% block main %}

        {{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}

        {# Les erreurs générales du formulaire. #}
        {{ form_errors(form) }}

        <fieldset>
            <legend>Informations visiteurs</legend>

            {% set i = 0 %}
            {% for client in form.Clients %}
                {% set i = i + 1 %}
                <label>Information sur le visiteur {{ i }} </label>
                <br/>
                <label>Nom</label>{{ form_widget(client.nom) }}
                <br/>
                <label>Prénom</label> {{ form_widget(client.prenom) }}
                <br/>
                <label>Pays</label> {{ form_widget(client.pays) }}
                <br/>
                <label>Date de naissance</label> {{ form_widget(client.dateNaissance) }}
                <label>Tarif réduit</label> {{ form_widget(client.Tarifreduit) }}
                <hr />
                {{ form_widget(form._token) }}
            {% endfor %}

       </fieldset>

        <div>
            <div style="text-align:right">
                <a href=""><input type="button" class="btn btn-danger" value="Annuler" /></a>
                <a href="{{ path('louvre_billetterie_homepage') }}"><input type="button" class="btn btn-default" value="< Etape précédente" /></a>
                <input type="submit" class="btn btn-default" value="Etape suivante >" />
            </div>
        </div>
        {{ form_end(form) }}

{% endblock %}
{% block aside %}
    <h4>Votre panier</h4>
        Visite pour le {{ app.session.get('date_visite')|date("d/m/Y") }}
        <hr />
        Nombre de ticket(s) : {{ app.session.get('nb_billet') }}

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
         $(':checkbox').change(function() {
            var id = 'msg_' + $(this).attr('id');
            if ($(this).is(':checked')) {
                $(this).after('<p id="' + id + '"><i>Merci de vous munir d\'un justificatif (carte d\'étudiant, carte militaire, carte d\'invalidité, etc.) le jour de votre visite.</i></p>')
            } else if (!($(this).is(':checked'))) {
                $('#' + id).remove();
            }
        });
    </script>
{% endblock %}