{% extends "LouvreBilletterieBundle::layout.html.twig" %}

{% block title %}
Billetterie - {{ parent() }}
{% endblock %}

{% block filariane %}
<li>Date de la visite</li>
<li>Informations</li>
<li>Confirmation</li>
<li>Paiement</li>
{% endblock %}


{% block main %}
<div class="well">
    {#{{ form_start(form, {'attr': {'class': 'form-horizontal'}}) }}#}
        <fieldset>
            <legend>Paiement</legend>

            <div class="row">
                <form action="{{ path('louvre_billetterie_paiement') }}" method="POST" id="boutonPaiement">
                    <script
                            src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                            {#data-key="{{ stripe_public_key }}"#}
                            data-key="pk_test_Z7CIYfAdyS4BYAwdNQHhUF1A"
                            data-currency="eur"
                            data-amount=12,00 * 100
                            data-name="Billet(s) musée du Louvre"
                            data-locale="auto"
                            data-zip-code="true">
                    </script>
                </form>
            </div>
        </fieldset>

        <div>
            <div style="text-align:right">
                <a href=""><input type="button" class="btn btn-danger" value="Annuler" /></a>
                <a href="{{ path('louvre_billetterie_commande') }}"><input type="button" class="btn btn-default" value="< Etape précédente" /></a>
                <input type="submit" class="btn btn-default" value="Etape suivante >" />
            </div>
        </div>
    {#{{ form_end(form) }}#}
</div>
{% endblock %}

{% block aside %}
<h4>Votre panier</h4>
Visite pour le {{ app.session.get('date_visite')|date("d/m/Y") }}
<hr />
<!--à partir de-->
Nombre de ticket(s) : {{ app.session.get('nb_billet') }}
<div>
    {% set infos = app.session.get('Infos') %}
    <br>
    {% for billet in infos.getClients() %}

    <p>{{ billet.nom }}
        {{ billet.prenom }}
        / Tarif {{ billet.tarif }}</p>
    {% endfor %}

</div>

<hr />
<div id="total" class="text-center">Total : {{ app.session.get('Total')  }} €</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https:ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
    <script type="text/javascript" src="https://js.stripe.com/v2/"></script>
    <script>

    </script>
{% endblock %}